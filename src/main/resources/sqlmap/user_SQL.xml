<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.brownie.user.service.impl.UserMapper">
	<select id="selectList" resultType="kr.co.brownie.user.service.UserVO">
    	SELECT 	BU.USER_ID AS USERID,
				BU.LOL_ID AS LOLID,
				BU.NICK_NAME AS NICKNAME,
				BU.BLACK_STACK AS BLACKSTACK,
				BU.STATUS,
				BU.IN_DATE AS INDATE,
				BU.UP_DATE AS MODDATE,
				BU.IN_USER_ID AS INUSERID,
				BU.UP_USER_ID AS UPUSERID,
				BU.USER_POSITION AS USERPOSITION,
                PM.PERMIT_LEVEL AS PERMITLEVEL,
                BE.USER_LEVEL AS USERLEVEL
		   FROM BROWNIE_USER BU, PERMIT PM, BROWNIE_EXP BE
          WHERE BU.USER_ID = PM.USER_ID
            AND BU.USER_ID = BE.USER_ID
	</select>

	<insert id="insertNick" parameterType="HashMap">
		insert into
		BROWNIE_USER
		(
		USER_ID,
		LOL_ID,
		NICK_NAME,
		BLACK_STACK,
		STATUS,
		IN_DATE,
		UP_DATE,
		IN_USER_ID,
		UP_USER_ID,
		USER_POSITION
		)
		values
		(
		#{id},
		nvl('','롤아이디미연동'),
		nvl(#{nickName},'닉네임미기입'),
		0,
		'y',
		to_char(sysdate, 'yyyy-MM-dd'),
		'',
		'',
		'',
		nvl(#{userPosition},'top/jun/mid/bot/sup')
		)
	</insert>

	<select id="userOneSelect"
		resultType="kr.co.brownie.user.service.UserVO">
		SELECT
		USER_ID AS userId,
		LOL_ID AS lolId,
		NICK_NAME AS nickName,
		BLACK_STACK AS blackStack,
		STATUS AS status,
		IN_DATE AS inDate,
		UP_DATE AS modDate,
		IN_USER_ID AS inUserId,
		UP_USER_ID AS upUserId,
		USER_POSITION AS userPosition
		FROM
		BROWNIE_USER
		WHERE
		USER_ID = #{id}
	</select>


<!-- 	<select id="LvSelect" resultType="int"> -->
<!-- 		SELECT -->
<!-- 		EXP -->
<!-- 		FROM -->
<!-- 		BROWNIE_EXP -->
<!-- 		WHERE -->
<!-- 		USER_ID= #{id} -->
<!-- 	</select> -->

<!-- 	<select id="starCntSelect" resultType="float"> -->
<!-- 		SELECT -->
<!-- 		SUM(STAR_CNT) / COUNT(STAR_CNT) -->
<!-- 		FROM -->
<!-- 		REVIEW -->
<!-- 	</select> -->


</mapper>