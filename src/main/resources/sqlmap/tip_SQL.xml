<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.brownie.tip.service.impl.TipMapper">
    <select id="selectTipList" parameterType="hashMap" resultType="kr.co.brownie.tip.service.TipVO">
        <![CDATA[
        SELECT BOARDSEQ,
               BOARDKIND,
               BOARDCATEGORY,
               TITLE,
               CONTENT,
               NOTICEYN,
               STATUS,
               INDATE,
               INUSERID,
               "UPDATE",
               UPUSERID,
               FILESEQ,
               SUBSEQ
        FROM (SELECT BOARDSEQ,
                     BOARDKIND,
                     BOARDCATEGORY,
                     TITLE,
                     CONTENT,
                     NOTICEYN,
                     STATUS,
                     INDATE,
                     INUSERID,
                     "UPDATE",
                     UPUSERID,
                     FILESEQ,
                     SUBSEQ,
                     ROWNUM AS RN
              FROM (SELECT BOARD_SEQ  AS BOARDSEQ,
                           BOARD_KIND AS BOARDKIND,
                           BOARD_CATEGORY AS BOARDCATEGORY,
                           TITLE      AS TITLE,
                           CONTENT    AS CONTENT,
                           NOTICE_YN  AS NOTICEYN,
                           STATUS     AS STATUS,
                           IN_DATE    AS INDATE,
                           IN_USER_ID AS INUSERID,
                           UP_DATE    AS "UPDATE",
                           UP_USER_ID AS UPUSERID,
                           FILE_SEQ   AS FILESEQ,
                           SUB_SEQ    AS SUBSEQ
                    FROM BROWNIE_BOARD
                    WHERE BOARD_KIND = 'tip'
        ]]>
        <if test='!champion.equals("")'>
            AND BOARD_CATEGORY = #{champion}
        </if>
        <![CDATA[
                    ORDER BY BOARD_SEQ DESC
                   )
             )
        WHERE ${contentPerPage} * (${currentPageNumber} - 1) + 1 <= RN
          AND RN <= ${contentPerPage} * ${currentPageNumber}
        ]]>
    </select>
    <select id="countTipList" parameterType="String" resultType="int">
        SELECT COUNT(*)
        FROM BROWNIE_BOARD
        WHERE BOARD_KIND = 'tip'
        <if test='!champion.equals("")'>
            AND BOARD_CATEGORY = #{champion}
        </if>
    </select>
</mapper>